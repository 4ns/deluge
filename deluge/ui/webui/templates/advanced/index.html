$def with (torrent_list, organize_filters)
$:render.header(_('Torrent list'))

<script language="javascript">
/*for select_all shortcut/button*/
var all_torrents = [
$for t in torrent_list:
    "$t.id",
]
</script>


<div class="panel" id="toolbar">

$for id, title, image, flag, method, url, important in toolbar_items:
    $if important:
        <a class='toolbar_btn' href="#"
        onclick='toolbar_$(method.lower()) ("$url",$flag)'
        title='$title'><img class='toolbar_btn'
        src='/static/images/tango/$image'></a>

$if organize_filters:
    $:render.part_categories(organize_filters)

</div>

<div id="tableContainer" class="tableContainer">
<table class="torrent_list" border=0 cellspacing=0 cellpadding=2  id="torrent_list" >
<thead class="fixedHeader">
<tr>
        $:(sort_head('calc_state_str', 'S'))
        $:(sort_head('queue', '#'))
        $:(sort_head('name', _('Name')))
        $:(sort_head('total_size', _('Size')))
        $:(sort_head('progress', _('Progress')))
        $if (not get('category')):
            $:(sort_head('category', _('Tracker')))
        $:(sort_head('num_seeds', _('Seeders')))
        $:(sort_head('num_peers', _('Peers')))
        $:(sort_head('download_rate', _('Download')))
        $:(sort_head('upload_rate', _('Upload')))
        $:(sort_head('eta', _('Eta')))
        $:(sort_head('distributed_copies', _('Ava')))
        $:(sort_head('ratio', _('Ratio')))
    </tr>
</thead>
<tbody class="scrollContent">
$altrow(True)
$#4-space indentation is mandatory for for-loops in templetor!
$for torrent in torrent_list:
    <tr class="$altrow()" onclick="on_click_row(event, '$torrent.id')" id="torrent_$torrent.id">
    <td>
       <form action="/torrent/$torrent.action/$torrent.id" method="POST"
            class="pause_resume">
            <input type="image"
            src="/static/images/$(torrent.calc_state_str)16.png"
            name="pauseresume" value="submit" />
        </form>
       </td>
    <td>$torrent.queue</td>
    <td style="width:100px; overflow:hidden;white-space: nowrap">
        $(crop(torrent.name, 40))</td>
    <td>$fsize(torrent.total_size)</td>
    <td class="progress_bar">
        <div class="progress_bar_outer">
            <div class="progress_bar" style="width:$(torrent.progress)%;overflow:hidden">
            $torrent.message $int(torrent.progress) %
            </div>
        </div>
    </td>
    $if (not get('category')):
        <td>$torrent.category</td>
    <td>
    $if torrent.total_seeds != -1:
        $torrent.num_seeds ($torrent.total_seeds)
    $else:
        0
    </td>
    <td>
    $if torrent.total_peers != -1:
        $torrent.num_peers ($torrent.total_peers)</td>
    $else:
        0
    <td>
    $if (torrent.download_rate):
        $fspeed(torrent.download_rate)
    $else:
        &nbsp;
    </td>
    <td>
    $if (torrent.upload_rate):
        $fspeed(torrent.upload_rate)
    $else:
       &nbsp;
    </td>
    <td>$ftime(torrent.eta)</td>
    <td>$("%.3f" % torrent.distributed_copies)</td>
    <td>$("%.3f" % torrent.ratio)</td\>
    </tr>
</tbody>
</table>
</div>


$:part_stats()

<div class="panel" id="info_panel_div">
    <iframe
    style="border-style:hidden;width:740px;height:200px;"
    id="torrent_info">
    </iframe>
</div>

<br />



<script language='javascript'>
    /*on_click_action = open_details;*/
    on_click_action = on_click_row_js;
    reselect_rows();
    var id = state.selected_rows[0];
    if (id) {
        open_inner_details(id);
    }
</script>

<form id='toolbar_form' method="POST" action="changed by javascript">

</form>

$:render.footer()


